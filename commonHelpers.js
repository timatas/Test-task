import{a as y,c as C}from"./assets/scroll-0cb9cff9.js";import"./assets/cart-page-51634d5f.js";import"./assets/vendor-4b9aba64.js";const g=document.querySelector(".products-quantity-title"),f=document.querySelector(".products-total-price"),s=document.querySelector(".cart-container"),I=document.querySelector(".cart-desktop-wrapper"),d=document.querySelector(".cart-empty"),N=document.querySelector(".del-all-wrapper"),c="products in cart",m=document.querySelector(".form-checkout");document.getElementById(".inputEmail");document.querySelector(".btnCheckout");i();N.addEventListener("click",S);function S(){localStorage.removeItem(c),i()}function i(){y();const t=JSON.parse(localStorage.getItem(c));if(t==null||t.length===0)I.style.display="none",d.style.display="block",s.innerHTML="",g.textContent="Cart (0)",f.textContent="$0";else{s.innerHTML="",d.style.display="none",s.insertAdjacentHTML("beforeend",C(t));const r=document.querySelectorAll(".products-quantity");t.forEach((o,e)=>{r[e].textContent=o.quantity}),l(t)}}s.addEventListener("click",h);function h(t){if(t.target.className!=="remove-btn"&&t.target.className!=="remove-btn-img")return;const r=t.target.closest(".cart-list-item"),o=r.id,e=JSON.parse(localStorage.getItem(c)),n=e.findIndex(a=>a._id===o);if(e.splice(n,1),localStorage.setItem(c,JSON.stringify(e)),r.remove(),y(),l(e),e==null||e.length===0){i();return}}s.addEventListener("click",b);function b(t){if(t.target.className!=="more-btn-img"&&t.target.className!=="less-btn"&&t.target.className!=="more-btn-card"&&t.target.className!=="less-btn-img")return;const r=t.target.closest(".cart-list-item"),o=r.id,e=JSON.parse(localStorage.getItem(c)),n=e.findIndex(q=>q._id===o),a=r.querySelector(".products-quantity");if((t.target.className==="more-btn-card"||t.target.className==="more-btn-img")&&(e[n].quantity++,a.innerHTML=e[n].quantity,localStorage.setItem(c,JSON.stringify(e)),l(e)),t.target.className==="less-btn"||t.target.className==="less-btn-img"){if(e[n].quantity===1)return;e[n].quantity--,a.innerHTML=e[n].quantity,localStorage.setItem(c,JSON.stringify(e)),l(e)}}function l(t){g.textContent=`Cart (${t.length})`;const r=t.reduce((o,{quantity:e,price:n})=>o+=e*n,0);f.textContent=`$${r.toFixed(2)}`}m.addEventListener("sumbit",function(t){m.value||alert("Please enter a valid email")});document.querySelector(".btnCheckout");const u=document.querySelector(".modal"),k=document.querySelector("#formCheckoutEmail"),p=document.querySelector("#formCheckoutInput");k.addEventListener("submit",E);function E(t){t.preventDefault();const r=p.value.trim();if(JSON.parse(localStorage.getItem(c)).reduce((n,{quantity:a})=>n+=a,0)===0){alert("You must add products' quantity!");return}if(r===""){alert("Please enter an email address");return}L({email:r}).then(()=>{console.log("Data sent successfully"),p.value="",S(),u.style.display="block"}).catch(n=>{console.error("There was a problem with the fetchoperation:",n)})}var x=document.getElementsByClassName("close")[0];x.onclick=function(){u.style.display="none"};window.onclick=function(t){t.currentTarget.className!=="modal"&&(u.style.display="none")};function L(t){return new Promise((r,o)=>{setTimeout(()=>{console.log("Imitating sending data to server:",t),r()},2e3)})}
//# sourceMappingURL=commonHelpers.js.map
