{"version":3,"file":"commonHelpers3.js","sources":["../src/js/popap.js","../src/main.js"],"sourcesContent":["import { createMarkupModal } from './template';\nimport { addBtnClickDiscount, addBtnClick } from './products';\nimport * as basicLightBox from 'basiclightbox';\nimport { fetchProducts } from './fetch';\n// BasicLightBox modal\nconst mainProducts = document.querySelector('.products-container');\nconst popularProducts = document.querySelector('.popular-container');\nconst discountProducts = document.querySelector('.discount-container');\n\nmainProducts.addEventListener('click', openModal);\npopularProducts.addEventListener('click', openModal);\ndiscountProducts.addEventListener('click', openModal);\n\nfunction openModal(event) {\n  if (\n    event.target === event.currentTarget ||\n    event.target.nodeName === 'BUTTON' ||\n    event.target.className === 'add-btn' ||\n    event.target.className === 'popular-basket-img' ||\n    event.target.className === 'icon-styles' ||\n    event.target.className === 'discount-basket-icon' ||\n    event.target.alt === 'icon bascket'\n  ) {\n    return;\n  }\n\n  if (event.target.closest('.discount-list-item') !== null) {\n    const targetProduct = event.target.closest('.discount-list-item');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n\n  if (event.target.closest('.list-item') !== null) {\n    const targetProduct = event.target.closest('.list-item');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n\n  if (event.target.closest('.product-popular-card') !== null) {\n    const targetProduct = event.target.closest('.product-popular-card');\n    const targetProductId = targetProduct.id;\n    renderProductModal(targetProductId, event);\n  }\n}\n\nasync function renderProductModal(id, e) {\n  try {\n    const data = [await fetchProducts(id)];\n    const closeWithEsc = evt => {\n      if (instance.visible() && evt.key === 'Escape') {\n        instance.close();\n      }\n    };\n    const instance = basicLightBox.create(createMarkupModal(data), {\n      onClose: instance =>\n        document.removeEventListener('keydown', closeWithEsc),\n      onClose: instance =>\n        modalContainer\n          .querySelector('.add-btn')\n          .removeEventListener('click', addBtnClick),\n      onClose: instance =>\n        modalContainer.removeEventListener('click', modalClose),\n    });\n    instance.show();\n    document.addEventListener('keydown', closeWithEsc);\n\n    const modalContainer = document.querySelector(\n      '.basicLightbox__placeholder'\n    );\n    modalContainer\n      .querySelector('.add-btn')\n      .addEventListener('click', addBtnClick);\n    modalContainer.addEventListener('click', modalClose);\n\n    function modalClose(evt) {\n      if (\n        evt.target.className === 'remove-btn' ||\n        evt.target.className === 'remove-btn-img'\n      ) {\n        instance.close();\n      }\n      return;\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","// Експорт функції шапки сайту ховати при прокрутці та показувати\nimport { handleHeaderScroll } from './js/base-js/scroll';\n// Експорт функції попапу\n// Імпорт стилів модалки\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\n// визов функції ховати та показувати шапку сайту\nhandleHeaderScroll();\n\n// // визов функціоналу попапа\n// const popupLinks = document.querySelectorAll('.popup-link');\n// // визов функції відкриття першого попапу\n// yourModule.popupOpen(popupLinks[0]);\n// //визов функції закриття попапу\n// const popupCloseIcon = document.querySelector('.close-popup');\n// yourModule.popupClose(popupCloseIcon.closest('.popup'));\n// // визов функції блокування скролу в боді\n// yourModule.bodyLock();\n// // визов функції розблокування скролу боді\n// yourModule.bodyUnLock();\n"],"names":["mainProducts","popularProducts","discountProducts","openModal","event","targetProductId","renderProductModal","id","e","modalClose","evt","instance","data","fetchProducts","closeWithEsc","basicLightBox.create","createMarkupModal","modalContainer","addBtnClick","error","handleHeaderScroll"],"mappings":"+JAKA,MAAMA,EAAe,SAAS,cAAc,qBAAqB,EAC3DC,EAAkB,SAAS,cAAc,oBAAoB,EAC7DC,EAAmB,SAAS,cAAc,qBAAqB,EAErEF,EAAa,iBAAiB,QAASG,CAAS,EAChDF,EAAgB,iBAAiB,QAASE,CAAS,EACnDD,EAAiB,iBAAiB,QAASC,CAAS,EAEpD,SAASA,EAAUC,EAAO,CACxB,GACE,EAAAA,EAAM,SAAWA,EAAM,eACvBA,EAAM,OAAO,WAAa,UAC1BA,EAAM,OAAO,YAAc,WAC3BA,EAAM,OAAO,YAAc,sBAC3BA,EAAM,OAAO,YAAc,eAC3BA,EAAM,OAAO,YAAc,wBAC3BA,EAAM,OAAO,MAAQ,gBAKvB,IAAIA,EAAM,OAAO,QAAQ,qBAAqB,IAAM,KAAM,CAExD,MAAMC,EADgBD,EAAM,OAAO,QAAQ,qBAAqB,EAC1B,GACtCE,EAAmBD,CAAsB,CAC1C,CAED,GAAID,EAAM,OAAO,QAAQ,YAAY,IAAM,KAAM,CAE/C,MAAMC,EADgBD,EAAM,OAAO,QAAQ,YAAY,EACjB,GACtCE,EAAmBD,CAAsB,CAC1C,CAED,GAAID,EAAM,OAAO,QAAQ,uBAAuB,IAAM,KAAM,CAE1D,MAAMC,EADgBD,EAAM,OAAO,QAAQ,uBAAuB,EAC5B,GACtCE,EAAmBD,CAAsB,CAC1C,EACH,CAEA,eAAeC,EAAmBC,EAAIC,EAAG,CACvC,GAAI,CA4BF,IAASC,EAAT,SAAoBC,EAAK,EAErBA,EAAI,OAAO,YAAc,cACzBA,EAAI,OAAO,YAAc,mBAEzBC,EAAS,MAAK,CAGjB,EAnCD,MAAMC,EAAO,CAAC,MAAMC,EAAcN,CAAE,CAAC,EAC/BO,EAAeJ,GAAO,CACtBC,EAAS,QAAO,GAAMD,EAAI,MAAQ,UACpCC,EAAS,MAAK,CAEtB,EACUA,EAAWI,EAAAA,OAAqBC,EAAkBJ,CAAI,EAAG,CAC7D,QAASD,GACP,SAAS,oBAAoB,UAAWG,CAAY,EACtD,QAASH,GACPM,EACG,cAAc,UAAU,EACxB,oBAAoB,QAASC,CAAW,EAC7C,QAASP,GACPM,EAAe,oBAAoB,QAASR,CAAU,CAC9D,CAAK,EACDE,EAAS,KAAI,EACb,SAAS,iBAAiB,UAAWG,CAAY,EAEjD,MAAMG,EAAiB,SAAS,cAC9B,6BACN,EACIA,EACG,cAAc,UAAU,EACxB,iBAAiB,QAASC,CAAW,EACxCD,EAAe,iBAAiB,QAASR,CAAU,CAWpD,OAAQU,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,CAC1B,CACH,CC/EAC"}