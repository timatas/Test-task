import{a as p,d as f}from"./assets/scroll-ca610e3c.js";import"./assets/favorite-page-0f38e8bc.js";import"./assets/vendor-8057a9e6.js";const S=document.querySelector(".products-quantity-title"),s=document.querySelector(".cart-container"),I=document.querySelector(".cart-desktop-wrapper"),u=document.querySelector(".cart-empty"),q=document.querySelector(".del-all-wrapper"),o="products in cart",d=document.querySelector(".form-checkout");document.getElementById(".inputEmail");document.querySelector(".btnCheckout");l();q.addEventListener("click",g);function g(){localStorage.removeItem(o),l()}function l(){p();const e=JSON.parse(localStorage.getItem(o));e==null||e.length===0?(I.style.display="none",u.style.display="block",s.innerHTML="",S.textContent="Favorite (0)"):(s.innerHTML="",u.style.display="none",s.insertAdjacentHTML("beforeend",f(e)))}s.addEventListener("click",N);function N(e){if(e.target.className!=="remove-btn"&&e.target.className!=="remove-btn-img")return;const n=e.target.closest(".cart-list-item"),c=n.id,t=JSON.parse(localStorage.getItem(o)),r=t.findIndex(a=>a._id===c);if(t.splice(r,1),localStorage.setItem(o,JSON.stringify(t)),n.remove(),p(),t==null||t.length===0){l();return}}s.addEventListener("click",b);function b(e){if(e.target.className!=="more-btn-img"&&e.target.className!=="less-btn"&&e.target.className!=="more-btn-card"&&e.target.className!=="less-btn-img")return;const n=e.target.closest(".cart-list-item"),c=n.id,t=JSON.parse(localStorage.getItem(o)),r=t.findIndex(y=>y._id===c),a=n.querySelector(".products-quantity");if((e.target.className==="more-btn-card"||e.target.className==="more-btn-img")&&(t[r].quantity++,a.innerHTML=t[r].quantity,localStorage.setItem(o,JSON.stringify(t))),e.target.className==="less-btn"||e.target.className==="less-btn-img"){if(t[r].quantity===1)return;t[r].quantity--,a.innerHTML=t[r].quantity,localStorage.setItem(o,JSON.stringify(t))}}d.addEventListener("sumbit",function(e){d.value||alert("Please enter a valid email")});document.querySelector(".btnCheckout");const i=document.querySelector(".modal"),h=document.querySelector("#formCheckoutEmail"),m=document.querySelector("#formCheckoutInput");h.addEventListener("submit",k);function k(e){e.preventDefault();const n=m.value.trim();if(JSON.parse(localStorage.getItem(o)).reduce((r,{quantity:a})=>r+=a,0)===0){alert("You must add products' quantity!");return}if(n===""){alert("Please enter an email address");return}E({email:n}).then(()=>{console.log("Data sent successfully"),m.value="",g(),i.style.display="block"}).catch(r=>{console.error("There was a problem with the fetchoperation:",r)})}var C=document.getElementsByClassName("close")[0];C.onclick=function(){i.style.display="none"};window.onclick=function(e){e.currentTarget.className!=="modal"&&(i.style.display="none")};function E(e){return new Promise((n,c)=>{setTimeout(()=>{console.log("Imitating sending data to server:",e),n()},2e3)})}
//# sourceMappingURL=commonHelpers2.js.map
